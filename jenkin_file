pipeline {
agent any
stages {
        stage('SCM checkout'){
        git 'https://github.com/rittobabu/maven-project'
        }
       }
    {
      stage ('Compile source code'){
      steps{
              withMaven(maven : 'LocalMaven'){
              sh 'mvn clean compile'
              }
            }
           }
       stage('Test source code'){
       steps{
       withMaven(maven : 'LocalMaven'){
       sh 'mvn test'
       }
       }
       }
       stage('Package source code'){
       steps{
       withMaven(maven : 'LocalMaven'){
       sh 'mvn package'
       }
       }
       }
        stage("build & SonarQube analysis") {
steps {
withSonarQubeEnv('sonar') {
sh 'mvn clean package sonar:sonar'
              }
            }
           }
       }
       }
       
       
